---
title: mysql服务zip包安装
tags: [mysql,数据库]
date: 2016-12-05 17:45:14
---


window 上 **Mysql**安装的时候有**msi**安装和**zip**解压安装。zip压缩包解压到目录，还需要做一定的配置才能使用

<!--more-->

## 下载mysql压缩包

[下载地址](http://dev.mysql.com/downloads/mysql/)

这里只选择服务端

![mysqlserver](http://hexo-1252734879.costj.myqcloud.com/images/mysql%E6%9C%8D%E5%8A%A1zip%E5%8C%85%E5%AE%89%E8%A3%85/mysql-down.png)

选择对应的版本

![mysqlversion](/images/mysql服务zip包安装/mysql-version.png)

## 安装压缩包

解压后可以放在任意一个系统盘上，把解压的文件夹拷贝到　D 盘文件名改为 `D:\MySQL Server 5.7`,然后进行配置

1. 配置环境变量

右键计算机->属性->高级系统设置->环境变量；在系统变量里添加MYSQL_HOME环境变量，变量值为MySQL的根目录

`MYSQL_NOHE= D:\MySQL Server 5.7`

然后在path中配置

在后面添加：`;%MYSQL_NOHE%\bin`


2. 配置my.ini文件

进去根目录中，有一个 `my-default.ini`文件，复制一个把文件名改为`my.ini`文件

修改里面的内容

```
# For advice on how to change settings please see
# http://dev.mysql.com/doc/refman/5.7/en/server-configuration-defaults.html
# *** DO NOT EDIT THIS FILE. It's a template which will be copied to the
# *** default location during install, and will be replaced if you
# *** upgrade to a newer version of MySQL.

[mysqld]

# Remove leading # and set to the amount of RAM for the most important data
# cache in MySQL. Start at 70% of total RAM for dedicated server, else 10%.
# innodb_buffer_pool_size = 128M

# Remove leading # to turn on a very important data integrity option: logging
# changes to the binary log between backups.
# log_bin

# These are commonly set, remove the # and set as required.
basedir = D:\MySQL Server 5.7
datadir = D:\MySQL Server 5.7\data
port = 3306
character-set-server= utf8
# server_id = .....


# Remove leading # to set options mainly useful for reporting servers.
# The server defaults are faster for transactions and fast SELECTs.
# Adjust sizes as needed, experiment to find the optimal values.
# join_buffer_size = 128M
# sort_buffer_size = 2M
# read_rnd_buffer_size = 2M 

sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES 

[client]
port=3306
default-character-set=utf8
```

修改的内容为一下的说明：
>     mysqld中： basedir：为服务的安装目录，datadir：为数据存放的目录
>     port：服务端口，character-set-server：服务端编码
>     client中： port：客户端端口，default-character-set：客户端编码

3. 安装mysql

以管理员进入cmd(**一定要以管理员权限进入**)，切换到 该服务`bin`目录下，执行以下命令：

`mysqld --initialize`

直接初始化mysql，生成data文件夹中的文件

然后执行：

`mysqld install`

该命令安装 mysql(执行该命令是要在`bin`目录下，否则执行文件路径不对) 

最后启动mysql服务

`net start mysql`

## 登录mysql

 mysql-server 5.7 安装后发现无法使用 mysql -uroot (-p) 来登录,这是因为进行初始化data文件时，会初始化一个密码放在启动的错误文件里
 
 文件路径为：`%mysql-server-dir%data\%机器名%.err`
 
 打开该文件，搜索：`temporary password` 会发现
 
 ![初始密码](/images/mysql服务zip包安装/password.png)
 
 就这一串字符串就可以登录成功了
 
 登录成功后还是不能操作的，如：
 
 `mysql> show databases;`
 
 会提示
 `ERROR 1820 (HY000): You must reset your password using ALTER USER statement before executing this statement.`
 
 就是让修改密码：
 
 `mysql>SET PASSWORD = PASSWORD('YourPassword');`
 
 然后刷新数据库：
 
 `mysql> flush privileges;`
 
 >mysql 版本为 5.7 。该版本之前的安装方法不一样
 
 **最后大功告成** :ok_hand:
